<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<h1>Server-Sent Events(SSE), 服务器发送事件</h1>
	<ul>
		
	</ul>
	<script>
		var source = new EventSource("http://localhost:4000/SSE");
		source.onmessage = function(event){
			var data = event.data;
			//console.log(data);
			// 处理数据
			var li = document.createElement("li");
			li.innerHTML = "Received: " + data;
			document.getElementsByTagName("ul")[0].appendChild(li);

			//source.close();
		}

		setTimeout(function(){
			source.close();
		}, 20 * 1000);
	</script>
	
</body>
</html>